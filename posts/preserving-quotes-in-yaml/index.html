<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - /">
    <title>Preserving Quotes in YAML | Chris Paraiso</title>
    <meta name="description" content="A minimal hugo theme focus on content">
    <meta property="og:url" content="/posts/preserving-quotes-in-yaml/">
  <meta property="og:site_name" content="Chris Paraiso">
  <meta property="og:title" content="Preserving Quotes in YAML">
  <meta property="og:description" content="For a bit of context, I’m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.
I wrote a Python script and successfully populated the YAML file with what I needed for now.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-25T02:37:52-07:00">
    <meta property="article:modified_time" content="2023-08-25T02:37:52-07:00">

    
  <meta itemprop="name" content="Preserving Quotes in YAML">
  <meta itemprop="description" content="For a bit of context, I’m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.
I wrote a Python script and successfully populated the YAML file with what I needed for now.">
  <meta itemprop="datePublished" content="2023-08-25T02:37:52-07:00">
  <meta itemprop="dateModified" content="2023-08-25T02:37:52-07:00">
  <meta itemprop="wordCount" content="490">
    
    <link rel="canonical" href="/posts/preserving-quotes-in-yaml/">
    <link rel="icon" href="//assets/favicon.ico">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="Chris Paraiso" href="//atom.xml" />
    <link rel="alternate" type="application/json" title="Chris Paraiso" href="//feed.json" />
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bricolage+Grotesque">
    
    <style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 bricolage grotesque,-apple-system,BlinkMacSystemFont,segoe ui,Helvetica,Arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#0f1112;color:#f2f0ed;font-size:17px;letter-spacing:.25px;line-height:2rem}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}header{display:flex;justify-content:space-between;align-items:center;position:relative;padding-bottom:1rem}header .burger{display:none;background:0 0;border:none;padding:0;cursor:pointer}header .burger span{display:block;width:25px;height:3px;background:#000;margin:5px 0;transition:all .3s ease}@media(max-width:768px){header .burger{display:block;z-index:2}header .nav-menu{position:fixed;top:0;right:-100%;width:100%;height:100vh;background:#fffdfa;padding:2rem;transition:.3s ease;z-index:1}header .nav-menu.active{right:0}header .nav-menu ul{flex-direction:column;align-items:center;width:100%}header .nav-menu ul li{display:block;font-size:1.2rem;border-bottom:1px dotted #000;height:50px;display:flex;justify-content:center;align-items:center}header.menu-open .burger span:first-child{transform:rotate(45deg)translate(5px,6px)}header.menu-open .burger span:nth-child(2){opacity:0}header.menu-open .burger span:last-child{transform:rotate(-45deg)translate(5px,-6px)}}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a:link,a:visited{color:#ffa873}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal;border-radius:10px}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background:0 0;line-height:1.5rem}code{margin:.1rem;border:none;overflow:visible;overflow-wrap:anywhere;font-size:16px;background:rgba(145,64,21,.1);color:#ffa873;padding:0 5px;border-radius:5px}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:768px;margin:0 auto}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1s infinite;opacity:1}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:120px;width:120px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#f2f2f2}footer{overflow:hidden}footer p{float:left}footer .social-links{float:right}footer .social-links ul{list-style:none}footer .social-links ul li{display:inline-block;margin-left:1rem}</style>
  
    
    
    
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "posts",
        "name": "Preserving Quotes in YAML",
        "headline": "Preserving Quotes in YAML",
        "alternativeHeadline": "",
        "description": "\u003cp\u003eFor a bit of context, I\u0026rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.\u003c\/p\u003e\n\u003cp\u003eI wrote a Python script and successfully populated the YAML file with what I needed for now.\u003c\/p\u003e",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/posts\/preserving-quotes-in-yaml\/"
        },
        "author" : {
            "@type": "Person",
            "name": ""
        },
        "creator" : {
            "@type": "Person",
            "name": ""
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": ""
        },
        "copyrightHolder" : "Chris Paraiso",
        "copyrightYear" : "2023",
        "dateCreated": "2023-08-25T02:37:52.00Z",
        "datePublished": "2023-08-25T02:37:52.00Z",
        "dateModified": "2023-08-25T02:37:52.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Chris Paraiso",
            "url": "/",
            "logo": {
                "@type": "ImageObject",
                "url": "\/assets\/favicon.ico",
                "width":"32",
                "height":"32"
            }
        },
        "image": "/assets/favicon.ico",
        "url" : "\/posts\/preserving-quotes-in-yaml\/",
        "wordCount" : "490",
        "genre" : [ ],
        "keywords" : [ ]
    }
    </script>
     

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const burger = document.querySelector('.burger');
            const nav = document.querySelector('.nav-menu');
            const header = document.querySelector('header');
        
            if (burger) {
                burger.addEventListener('click', () => {
                    nav.classList.toggle('active');
                    header.classList.toggle('menu-open');
                });
        
                
                document.addEventListener('click', (e) => {
                    if (!header.contains(e.target) && nav.classList.contains('active')) {
                        nav.classList.remove('active');
                        header.classList.remove('menu-open');
                    }
                });
            }
        });
    </script> 
  </head>

<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
  <div class="content">
    
<header>
  <p style="padding: 0;margin: 0;">
    <a href="/">
      <b>Chris Paraiso</b>
      <span class="text-stone-500 animate-blink">▮</span>
    </a>
  </p>

  
  <ul style="padding: 0;margin: 0;">
    
    
    <li class="">
      <a href="/posts/"><span>Posts</span></a>
      
    </li>
  </ul>
  
</header>
<hr class="hr-list" style="padding: 0;margin: 0;">
    <section>
      <h2 class="post">Preserving Quotes in YAML</h2>
      <p>For a bit of context, I&rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.</p>
<p>I wrote a Python script and successfully populated the YAML file with what I needed for now.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ff79c6">id</span>: 5214484c-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">type</span>: <span style="color:#f1fa8c">&#34;graphic&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">subtype</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">media-not-started</span>: <span style="color:#f1fa8c">&#34;false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">title</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">transcript</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">assets</span>:
</span></span><span style="display:flex;"><span>- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span>- 521285a2-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span>- 5213159e-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ui</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">instructions</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">images</span>: []
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">svgs</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#ff79c6">text1</span>: 52117bbc-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">text2</span>: 521285a2-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">text3</span>: 5213159e-42d2-11ee-bb4b-a0cec89b3edd
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">file</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">caption</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">ratio</span>: <span style="color:#f1fa8c">&#34;822/861&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">stylesheet</span>: 5214b930-42d2-11ee-bb4b-a0cec89b3edd
</span></span></code></pre></div><p>Every UUID seen here has a corresponding directory, YAML file and markdown file with the same UUID. For example, the property of <code>text1</code> would have:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>52117bbc-42d2-11ee-bb4b-a0cec89b3edd/ <span style="color:#6272a4">#directory</span>
</span></span><span style="display:flex;"><span>|
</span></span><span style="display:flex;"><span>|-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.yml
</span></span><span style="display:flex;"><span>|
</span></span><span style="display:flex;"><span>+-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.md
</span></span></code></pre></div><p>But there&rsquo;s an issue. If you take a look at the YAML file, some properties are wrapped in double quotes and some are not. All values in the YAML file need to be surrounded by double quotes for my situation.</p>
<p>Initially, I went with PyYaml&rsquo;s library to assist me in wrangling YAML with Python. Everything was working well up until this point. Diving into the docs I can tell some programmers find documentation hard because it did not help at all. How can I RTFM if the manual is useless? Dive into the source code? I really shouldn&rsquo;t need to do that for something so simple as this. Even, after diving through the source code, it was still unclear.</p>
<p><strong>Tip</strong>: When writing technical documentation, imagine yourself as <em><strong>NOT</strong></em> the person who developed it. Also, imagine you&rsquo;re explaining it to your mom. Thanks.</p>
<p>After a bit of research, I switched to ruamel.yaml&rsquo;s Python library. The API was similar for my needs and the source code was easy to navigate. Refactoring was minimal and it solved my missing double quote issue.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ruamel.yaml <span style="color:#ff79c6">import</span> YAML <span style="color:#6272a4"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ruamel.yaml.scalarstring <span style="color:#ff79c6">import</span> DoubleQuotedScalarString <span style="color:#6272a4"># 2</span>
</span></span><span style="display:flex;"><span>yaml <span style="color:#ff79c6">=</span> YAML()                       
</span></span><span style="display:flex;"><span>yaml<span style="color:#ff79c6">.</span>preserve_quotes <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span> <span style="color:#6272a4"># 3</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">media_insert_text_field</span>(fields: List[Dict]) <span style="color:#ff79c6">-&gt;</span> Tuple:
</span></span><span style="display:flex;"><span>    assets <span style="color:#ff79c6">=</span> []
</span></span><span style="display:flex;"><span>    ui <span style="color:#ff79c6">=</span> {} 
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">for</span> field <span style="color:#ff79c6">in</span> fields:
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># 4</span>
</span></span><span style="display:flex;"><span>        double_quoted_scalar <span style="color:#ff79c6">=</span> DoubleQuotedScalarString(field[<span style="color:#f1fa8c">&#39;uuid&#39;</span>])
</span></span><span style="display:flex;"><span>        assets<span style="color:#ff79c6">.</span>append(double_quoted_scalar)
</span></span><span style="display:flex;"><span>        ui[<span style="color:#f1fa8c">f</span><span style="color:#f1fa8c">&#34;text</span><span style="color:#f1fa8c">{</span>field[<span style="color:#f1fa8c">&#39;index&#39;</span>]<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>] <span style="color:#ff79c6">=</span> double_quoted_scalar 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> (assets, ui)
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">...</span>
</span></span></code></pre></div><ol>
<li>
<p>Load ruamel.yaml.</p>
</li>
<li>
<p>Import <code>DoubleQuotedScalarString</code> to force double quotes on scalar types.</p>
</li>
<li>
<p>Set <code>preserve_quotes</code> to <code>true</code>.</p>
</li>
<li>
<p>Force double quotes on <code>field['uuid']</code> with <code>DoubleQuotedScalarString</code>.</p>
</li>
</ol>
<p>You may be asking yourself why I needed <code>DoubleQuotedScalarString</code> if <code>preserve_quotes</code> was set to <code>true</code>. I&rsquo;m still asking myself that question. Data was triple checked and followed the same format as the other properties I&rsquo;m injected in the final YAML so I&rsquo;m not sure why. But ruamel.yaml made it easy to force it. That&rsquo;s all that matters to me.</p>
<p>I&rsquo;ll end by reiterating a tip to write technical documentation like your mom will be reading it. (Not that I&rsquo;m a mother, but you get the gist.)</p>
<p>Be sure to follow me <a href="https://twitter.com/chrisparaiso">@chrisparaiso</a>.</p>

      
      <div class="post-date">
        <span class="g time">August 25, 2023 </span> &#8729;
         
      </div>
      
    </section>
    
    
    <div id="comments">
      
<script src="https://utteranc.es/client.js"
    repo=cparaiso/cparaiso.github.io
    issue-term="pathname"
    theme=github-dark
    crossorigin="anonymous"
    async>
</script>


    </div>
    
    
    
<footer>
<p>&copy; 2025 Chris Paraiso</p>
<div class="social-links">
  <ul>
    <li><a href="https://x.com/chrisparaiso">x/twitter</a></li>
    <li><a href="https://github.com/cparaiso">github</a></li>
    <li><a href="https://www.linkedin.com/in/chrisparaiso/">linkedin</a></li>
  </ul>
</div>
</footer>

  </div>
</main>
</body>
</html>
