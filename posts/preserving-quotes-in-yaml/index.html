<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Preserving Quotes in YAML | Chris Paraiso</title>
<meta name="keywords" content="">
<meta name="description" content="For a bit of context, I&rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.
I wrote a Python script and successfully populated the YAML file with what I needed for now.">
<meta name="author" content="">
<link rel="canonical" href="https://chrisparaiso.dev/posts/preserving-quotes-in-yaml/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5ae2fa64e192672c2c806403f36c89922676aff90e6bcf071e6dcdede9533972.css" integrity="sha256-WuL6ZOGSZywsgGQD82yJkiZ2r/kOa88HHm3N7elTOXI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://chrisparaiso.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://chrisparaiso.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://chrisparaiso.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://chrisparaiso.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://chrisparaiso.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Preserving Quotes in YAML" />
<meta property="og:description" content="For a bit of context, I&rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.
I wrote a Python script and successfully populated the YAML file with what I needed for now." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chrisparaiso.dev/posts/preserving-quotes-in-yaml/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-25T02:37:52-07:00" />
<meta property="article:modified_time" content="2023-08-25T02:37:52-07:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Preserving Quotes in YAML"/>
<meta name="twitter:description" content="For a bit of context, I&rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.
I wrote a Python script and successfully populated the YAML file with what I needed for now."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://chrisparaiso.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Preserving Quotes in YAML",
      "item": "https://chrisparaiso.dev/posts/preserving-quotes-in-yaml/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Preserving Quotes in YAML",
  "name": "Preserving Quotes in YAML",
  "description": "For a bit of context, I\u0026rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.\nI wrote a Python script and successfully populated the YAML file with what I needed for now.",
  "keywords": [
    
  ],
  "articleBody": "For a bit of context, I’m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.\nI wrote a Python script and successfully populated the YAML file with what I needed for now.\nid: 5214484c-42d2-11ee-bb4b-a0cec89b3edd type: \"graphic\" subtype: \"\" metadata: media-not-started: \"false\" title: \"\" transcript: \"\" assets: - 52117bbc-42d2-11ee-bb4b-a0cec89b3edd - 521285a2-42d2-11ee-bb4b-a0cec89b3edd - 5213159e-42d2-11ee-bb4b-a0cec89b3edd ui: instructions: \"\" images: [] svgs: - text1: 52117bbc-42d2-11ee-bb4b-a0cec89b3edd text2: 521285a2-42d2-11ee-bb4b-a0cec89b3edd text3: 5213159e-42d2-11ee-bb4b-a0cec89b3edd file: \"\" caption: \"\" ratio: \"822/861\" stylesheet: 5214b930-42d2-11ee-bb4b-a0cec89b3edd Every UUID seen here has a corresponding directory, YAML file and markdown file with the same UUID. For example, the property of text1 would have:\n52117bbc-42d2-11ee-bb4b-a0cec89b3edd/ #directory | |-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.yml | +-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.md But there’s an issue. If you take a look at the YAML file, some properties are wrapped in double quotes and some are not. All values in the YAML file need to be surrounded by double quotes for my situation.\nInitially, I went with PyYaml’s library to assist me in wrangling YAML with Python. Everything was working well up until this point. Diving into the docs I can tell some programmers find documentation hard because it did not help at all. How can I RTFM if the manual is useless? Dive into the source code? I really shouldn’t need to do that for something so simple as this. Even, after diving through the source code, it was still unclear.\nTip: When writing technical documentation, imagine yourself as NOT the person who developed it. Also, imagine you’re explaining it to your mom. Thanks.\nAfter a bit of research, I switched to ruamel.yaml’s Python library. The API was similar for my needs and the source code was easy to navigate. Refactoring was minimal and it solved my missing double quote issue.\nfrom ruamel.yaml import YAML # 1 from ruamel.yaml.scalarstring import DoubleQuotedScalarString # 2 yaml = YAML() yaml.preserve_quotes = True # 3 def media_insert_text_field(fields: List[Dict]) -\u003e Tuple: assets = [] ui = {} for field in fields: # 4 double_quoted_scalar = DoubleQuotedScalarString(field['uuid']) assets.append(double_quoted_scalar) ui[f\"text{field['index']}\"] = double_quoted_scalar return (assets, ui) ... Load ruamel.yaml.\nImport DoubleQuotedScalarString to force double quotes on scalar types.\nSet preserve_quotes to true.\nForce double quotes on field['uuid'] with DoubleQuotedScalarString.\nYou may be asking yourself why I needed DoubleQuotedScalarString if preserve_quotes was set to true. I’m still asking myself that question. Data was triple checked and followed the same format as the other properties I’m injected in the final YAML so I’m not sure why. But ruamel.yaml made it easy to force it. That’s all that matters to me.\nI’ll end by reiterating a tip to write technical documentation like your mom will be reading it. (Not that I’m a mother, but you get the gist.)\nBe sure to follow me @chrisparaiso.\n",
  "wordCount" : "490",
  "inLanguage": "en",
  "datePublished": "2023-08-25T02:37:52-07:00",
  "dateModified": "2023-08-25T02:37:52-07:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chrisparaiso.dev/posts/preserving-quotes-in-yaml/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Chris Paraiso",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chrisparaiso.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://chrisparaiso.dev/" accesskey="h" title="Chris Paraiso (Alt + H)">Chris Paraiso</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://chrisparaiso.dev/" title="Chris Paraiso">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://chrisparaiso.dev/about/" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="https://chrisparaiso.dev/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://chrisparaiso.dev/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Preserving Quotes in YAML
    </h1>
    <div class="post-meta"><span title='2023-08-25 02:37:52 -0700 MST'>August 25, 2023</span>

</div>
  </header> 
  <div class="post-content"><p>For a bit of context, I&rsquo;m working on a project that spits out a YAML file that has properties with UUIDs. These UUIDs are linked to different text files and image files. The goal was to have some kind of web component consisting of an SVG with a text overlay. The text was separated out for third-party localization.</p>
<p>I wrote a Python script and successfully populated the YAML file with what I needed for now.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">id</span>: <span style="color:#ae81ff">5214484c-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">type</span>: <span style="color:#e6db74">&#34;graphic&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">subtype</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">media-not-started</span>: <span style="color:#e6db74">&#34;false&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">transcript</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">assets</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">52117bbc-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">521285a2-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span>- <span style="color:#ae81ff">5213159e-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">ui</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">instructions</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">images</span>: []
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">svgs</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">text1</span>: <span style="color:#ae81ff">52117bbc-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">text2</span>: <span style="color:#ae81ff">521285a2-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">text3</span>: <span style="color:#ae81ff">5213159e-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">file</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">caption</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">ratio</span>: <span style="color:#e6db74">&#34;822/861&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stylesheet</span>: <span style="color:#ae81ff">5214b930-42d2-11ee-bb4b-a0cec89b3edd</span>
</span></span></code></pre></div><p>Every UUID seen here has a corresponding directory, YAML file and markdown file with the same UUID. For example, the property of <code>text1</code> would have:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">52117bbc-42d2-11ee-bb4b-a0cec89b3edd/</span> <span style="color:#75715e">#directory</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">|</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">|-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.yml</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">|</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">+-- 52117bbc-42d2-11ee-bb4b-a0cec89b3edd.md</span>
</span></span></code></pre></div><p>But there&rsquo;s an issue. If you take a look at the YAML file, some properties are wrapped in double quotes and some are not. All values in the YAML file need to be surrounded by double quotes for my situation.</p>
<p>Initially, I went with PyYaml&rsquo;s library to assist me in wrangling YAML with Python. Everything was working well up until this point. Diving into the docs I can tell some programmers find documentation hard because it did not help at all. How can I RTFM if the manual is useless? Dive into the source code? I really shouldn&rsquo;t need to do that for something so simple as this. Even, after diving through the source code, it was still unclear.</p>
<p><strong>Tip</strong>: When writing technical documentation, imagine yourself as <em><strong>NOT</strong></em> the person who developed it. Also, imagine you&rsquo;re explaining it to your mom. Thanks.</p>
<p>After a bit of research, I switched to ruamel.yaml&rsquo;s Python library. The API was similar for my needs and the source code was easy to navigate. Refactoring was minimal and it solved my missing double quote issue.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> ruamel.yaml <span style="color:#f92672">import</span> YAML <span style="color:#75715e"># 1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> ruamel.yaml.scalarstring <span style="color:#f92672">import</span> DoubleQuotedScalarString <span style="color:#75715e"># 2</span>
</span></span><span style="display:flex;"><span>yaml <span style="color:#f92672">=</span> YAML()                       
</span></span><span style="display:flex;"><span>yaml<span style="color:#f92672">.</span>preserve_quotes <span style="color:#f92672">=</span> <span style="color:#66d9ef">True</span> <span style="color:#75715e"># 3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">media_insert_text_field</span>(fields: List[Dict]) <span style="color:#f92672">-&gt;</span> Tuple:
</span></span><span style="display:flex;"><span>    assets <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    ui <span style="color:#f92672">=</span> {} 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> field <span style="color:#f92672">in</span> fields:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 4</span>
</span></span><span style="display:flex;"><span>        double_quoted_scalar <span style="color:#f92672">=</span> DoubleQuotedScalarString(field[<span style="color:#e6db74">&#39;uuid&#39;</span>])
</span></span><span style="display:flex;"><span>        assets<span style="color:#f92672">.</span>append(double_quoted_scalar)
</span></span><span style="display:flex;"><span>        ui[<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;text</span><span style="color:#e6db74">{</span>field[<span style="color:#e6db74">&#39;index&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>] <span style="color:#f92672">=</span> double_quoted_scalar 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (assets, ui)
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span></code></pre></div><ol>
<li>
<p>Load ruamel.yaml.</p>
</li>
<li>
<p>Import <code>DoubleQuotedScalarString</code> to force double quotes on scalar types.</p>
</li>
<li>
<p>Set <code>preserve_quotes</code> to <code>true</code>.</p>
</li>
<li>
<p>Force double quotes on <code>field['uuid']</code> with <code>DoubleQuotedScalarString</code>.</p>
</li>
</ol>
<p>You may be asking yourself why I needed <code>DoubleQuotedScalarString</code> if <code>preserve_quotes</code> was set to <code>true</code>. I&rsquo;m still asking myself that question. Data was triple checked and followed the same format as the other properties I&rsquo;m injected in the final YAML so I&rsquo;m not sure why. But ruamel.yaml made it easy to force it. That&rsquo;s all that matters to me.</p>
<p>I&rsquo;ll end by reiterating a tip to write technical documentation like your mom will be reading it. (Not that I&rsquo;m a mother, but you get the gist.)</p>
<p>Be sure to follow me <a href="https://twitter.com/chrisparaiso">@chrisparaiso</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="https://chrisparaiso.dev/posts/fighting-with-venv-in-python/">
    <span class="title">Next »</span>
    <br>
    <span>Fighting with venv in Python</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://chrisparaiso.dev/">Chris Paraiso</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
